<style>
    .Box {
        background-color:#000000;
        border:solid white;
        border-width: 1.125vh 1.125vh;
        color:#ffffff;
        overflow: hidden;
        font-family: Determination;
        position:relative;
    }
    @font-face {
        font-family: 'Determination';
        src: url('./Fonts/DeterminationMono.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
    }
    .Text {
        color:#ffffff;
        font-size:calc(5vw - 10%);
        font-family: Determination;
        position:relative;
    }
    .numinput::-webkit-outer-spin-button,
    .numinput::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
        input[type=number] {
            appearance: textfield;
        }
    }
</style>

<style>
.container {
  position: relative;
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.container input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.checkmark {
  position: relative;
  display: inline-block;
  vertical-align:middle;
  width: 2vw;
  height: 2vw;
  border: solid white;
  border-width: 0.5625vh;
  background-color: black;
}

.container:hover input ~ .checkmark {
  background-color: #292929;
}

.container input:checked ~ .checkmark {
  background-color: white;
}

</style>

<!--WeaponDPS styles-->
<style>
    .DPSBox {
        background-color:#000000;
        border:solid white;
        border-width: 0.5625vh 0.5625vh;
        color:#ffffff;
        overflow: none;
        font-family: Determination;
        position:relative;
        width:9vw;
        height:15vw;
    }
    .DPSText {
        color:#ffffff;
        font-size:0.973684211vw;
        width:9vw;
        height:2.5vw;
        max-height: 80%;
        overflow: auto;
        font-family: Determination;
        position:relative;
    }
</style>

<!--Expanded WeaponDPS styles-->
<style>
    .EDPSBox {
        background-color:#000000;
        border:solid white;
        border-width: 0.5625vh 0.5625vh;
        color:#ffffff;
        overflow: auto;
        font-family: Determination;
        position:relative;
        margin: 2vw;
        width:85vw;
    }
    .EDPSText {
        color:#ffffff;
        font-size:0.973684211vw;
        width:9vw;
        height:2.5vw;
        max-height: 80%;
        overflow: auto;
        font-family: Determination;
        position:relative;
    }
    .EDivs {
        overflow: auto;
        font-family: Determination;
        position:relative;
        margin: 2vw;
        width:40%;
    }
    .ETitle {
        background-color:#000000;
        color:#ffffff;
        overflow: auto;
        font-family: Determination;
        position:relative;
        margin: 2vw;
        width:95%;
    }
</style>

<style>
    .slider {
      appearance: none;
      width: 80%;
      height: 2%;
      background: #ffffff;
      outline: none;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 13%;
      height: 175%;
      background: #ffffff;
      cursor: pointer;
    }
    .dpsInput {
        font-size:calc(2vw - 2%);
        border:solid white 0px;
        background-color:black;
        position:relative;
        width:10%;
        display:inline-block;
        font-family:Determination;
        color:white;
    }
    .dpsInput::-webkit-outer-spin-button,
    .dpsInput::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
        input[type=number] {
            appearance: textfield;
        }
    }
</style>

<!--Links-->
<style>
a:link {
  color: yellow;
  background-color: transparent;
  text-decoration: none;
}

a:visited {
  color: yellow;
  background-color: transparent;
  text-decoration: none;
}

a:hover {
  color: yellow;
  background-color: transparent;
  text-decoration: underline;
}

a:active {
  color: yellow;
  background-color: transparent;
  text-decoration: underline;
}
</style>

<html class="Box" id="HTML" style="overflow-y: scroll; overflow:visible; -ms-overflow-style: none; scrollbar-width: none;">

    <p class="Text" id="title" style="margin: 2%; text-align:center">Unwavering Soul Calculator</p>
    <!--Info-->
    <body class="Text" style="text-align: center; display:inline-block; font-size:2vw;">Info: <br>To see your DPS, input your stats below. Everything is ordered by low reset to high reset, and the items type (<a href="#Stick">Weapon</a>, <a href="#Snowball">Event Weapon</a> , <a href="#Rift Essence">Miscellaneous</a>,  <a href="#Sans's Hat">Event Miscellaneous</a>, <a href="#Winter's Curse">Other</a>, and <a href="#SkillDPS">Skills</a>). Also note that some of the special items are purely calculated on very few points of damage. Meaning it won't be perfect. Boosts are additive (meaning 2x dmg is actually + 100%)<br></body>
    
    <!--Settings-->
    <div class="Box" style="margin: 3% 0; overflow:auto; width:max-content; height:max-content; max-height:100%; max-width:100%; position:relative; top:10%">
        <p style="position: relative; left: 0%; text-align: left; font-size: 2.5vw; margin-top: 1%; margin-bottom: 4%;">Settings:</p>
        <div style="display:flex; flex-direction: column; margin:2% 0 2% 0">
            <p id="PrecisionText" style="text-align: left; font-size: 1.5vw; margin:2% 0 2% 0">Precision: 3</p>
            <input style="height:0.75em; width:50%" id="Precision" type="range" class="slider" min="1" value="3" max="10" onchange="changeSettings()">
        </div>
    </div>
    
    <!--Stats-->
    <div class="Box" id="statChanger" style="margin-top:2%; position:sticky; top:0%; z-index:997">
        <h style="font-size:calc(2vw - 2%);font-family:Determination;color:white; ">Boss HP:</h><input id="BossHp" onchange="clamp_ish(this, 5000000000)" class="numinput" type="number" value="0" style="font-size:calc(2vw - 2%); border:solid white 0px; background-color:black; position:relative; width:14%; display:inline-block; font-family:Determination;color:white;"></input>
        <!--<h style="font-size:calc(2vw - 2%);font-family:Determination;color:white;">Boss Defense:</h><input id="BossDefense" onchange="clamp_ish(this,100)" class="numinput" type="number" value="0" style="font-size:calc(2vw - 2%); border:solid white 0px; background-color:black; position:relative; width:7.5%; display:inline-block; font-family:Determination;color:white;"></input>--><br>
        <h style="font-size:calc(2vw - 2%);font-family:Determination;color:white;">True Reset:
            <label class="container">
                <input type="checkbox" onchange="UpdateStuff()" id="TR">
                <span class="checkmark"></span>
            </label>
        </h>
        <h style="font-size:calc(2vw - 2%);font-family:Determination;color:white;">Resets:</h><input id="Resets" onchange="clamp_ish(this,1000000)" class="dpsInput" type="number" value="0"></input>
        <h style="font-size:calc(2vw - 2%);font-family:Determination;color:white; ">TP:</h><input id="TP" onchange="clamp_ish(this, 100000)" class="dpsInput" type="number" value="0"></input>
        <h style="font-size:calc(2vw - 2%);font-family:Determination;color:white;">Levels:</h><input id="Levels" onchange="clamp_ish(this, 50000,1)" class="dpsInput" type="number" value="1"></input>
        <h style="font-size:calc(2vw - 2%);font-family:Determination;color:white;"><br>Attack:</h><input id="Attack" onchange="clamp_ish(this, 50000)" class="dpsInput" type="number" value="0"></input>
        <h style="font-size:calc(2vw - 2%);font-family:Determination;color:white;">Boosts:</h><input id="Boosts" onchange="clamp_ish(this, 300)" class="dpsInput" type="number" value="0">%</input>
    </div>
    
    <p style="margin-top:5%">
    <input class="dpsInput" id="Search" oninput="filterDPS()" placeholder="Search" style="border:solid white 0.5vw; width:22%;"></input>
    <!--WeaponDPS-->
    <div class="Box" id="WeaponDPS" style="margin: 3% 0; overflow:auto;  width:97%;"></div>
    <script>
        var WeaponDPS = document.getElementById("WeaponDPS");
        var Resets = parseInt(document.getElementById("Resets").value);
        var Levels = parseInt(document.getElementById("Levels").value);
        var TP = parseInt(document.getElementById("TP").value);
        var tr = 0;
        if (document.getElementById("TR").checked) {
            tr = 10000;
        }
        
        var generalDamageAddition = (Resets * 250) + TP + tr;
        var jokeDMG = -2.5e+238;
        class Item {
            constructor(name, description = "", base = null, specials = [], options = {}) {
                this.name = name;
                this.description = description;
                
                this.original = {
                    base,
                    specials
                };
                this.New = structuredClone(this.original);
                this.options = {
                    hideDamage:options.hideDamage ?? false,
                    AddSpecial:options.AddSpecial ?? true,
                    hideSpecial:options.hideSpecial ?? false,
                    addHits:options.addHits ?? true,
                    showBase:options.showBase ?? true,
                };
        
                // Calculated stats (no duplicate of original values)
                this.stats = {
                    totalDamage: 0,
                    totalHits: 0,
                    DPS: 0,
                    hitDPS: 0,
                    uses: 0,
                    specials: {} // Named special stats only
                };
        
                this.calculateStats();
            }
            cleanName(name) {
                return name.replace(/[^a-zA-Z0-9]/g, "");
            }
            calculateStats() {
                const { base, specials } = this.New;
                const firstSpecial = specials.length > 0 ? specials[0] : null;
        
                for (const spec of specials) {
                    const cleaned = this.cleanName(spec.name);
                    const totalSpecialDamage = spec.damage * spec.hits;
                    const totalSpecialHits = spec.hits;
                    const cooldown = spec.cooldown;
        
                    this.stats.specials[cleaned] = {
                        name: spec.name,
                        damage: spec.damage,
                        hits: spec.hits,
                        cooldown,
                        totalDamage: totalSpecialDamage,
                        totalHits: totalSpecialHits,
                        DPS: totalSpecialDamage / cooldown,
                        hitDPS: totalSpecialHits / cooldown
                    };
                }
        
                if (!base || Object.keys(base).length === 0) return;
                
                var cycleTime = 0;
                if (this.options.AddSpecial) {
                    cycleTime = firstSpecial ? firstSpecial.cooldown : base.cooldown;
                } else {
                    cycleTime = base.cooldown;
                }
                const baseHits = base.hits * base.uses;
                const baseDamage = base.damage * (this.options.addHits ? baseHits : 1);
        
                const specialDamage = firstSpecial ? firstSpecial.damage * firstSpecial.hits : 0;
                const specialHits = firstSpecial ? firstSpecial.hits : 0;
                this.stats.totalHits = baseHits;
                this.stats.totalDamage = baseDamage;
                this.stats.uses = base.uses;
                if (this.options.AddSpecial && firstSpecial != null) {
                    this.stats.totalDamage += specialDamage;
                    this.stats.totalHits += specialHits;
                    this.stats.uses += firstSpecial.uses;
                }
                this.stats.DPS = this.stats.totalDamage / cycleTime;
                this.stats.hitDPS = this.stats.totalHits / cycleTime;
            }
            updateElements() {
                function checkIfNull(item, value) {
                    if (item != null) {
                        item.innerText = value;
                    }
                }
                checkIfNull(document.getElementById(this.name + " MiniDPS"),"Your DPS: " + convert(this.stats.DPS))
                checkIfNull(document.getElementById(this.name + " Damage"),"Your Damage: " + convert(this.New.base.damage));
                checkIfNull(document.getElementById(this.name + " Total Damage"), "Total Damage: " + convert(this.stats.totalDamage));
                checkIfNull(document.getElementById(this.name + " DPS"), "Your DPS: " + convert(this.stats.DPS));
            
                for (var i = 0; i < this.original.specials.length; i++) {
                    var name = this.New.specials[i].name;
                    checkIfNull(document.getElementById(this.name + " " + name + " Damage"),name + " Total Damage: " + convert(this.stats.specials[this.cleanName(name)].totalDamage));
                    checkIfNull(document.getElementById(this.name + " " + name + " DPS"),name + " DPS: " + convert(this.stats.specials[this.cleanName(name)].DPS));
                } 
            }
        }

        var ITEMS = {
          "Stick": new Item(
                "Stick",
                "Description: Its bark is worse than its bite",
                {"damage": 7, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "ToyKnife": new Item(
                "Toy Knife",
                "Description: Made of plastic. A rarity nowadays.",
                {"damage": 15, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "TornNotebook": new Item(
                "Torn Notebook",
                "Description: Contains illegible scrawls.",
                {"damage": 31, "cooldown": 1.2, "uses": 1, "hits": 1},
                []
            ),
          "BurntPan": new Item(
                "Burnt Pan",
                "Description: Damage is rather consistent.",
                {"damage": 40, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "EmptyGun": new Item(
                "Empty Gun",
                "Description: An antique revolver. It has no ammo.",
                {"damage": 50, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "WornDagger": new Item(
                "Worn Dagger",
                "Description: Perfect for cutting plants and vines.",
                {"damage": 100, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "AsgoreTrident": new Item(
                "Asgore Trident",
                "Description: The King's precious weapon",
                {"damage": 60, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "FasterBlaster": new Item(
                "Faster Blaster",
                "Description: ",
                {"damage": 125, "cooldown": 0.85, "uses": 1, "hits": 1},
                []
            ),
          "PhotoshopSword": new Item(
                "Photoshop Sword",
                "Description: ",
                {"damage": 300, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "UFAsgoreTrident": new Item(
                "UF Asgore Trident",
                "Description: ",
                {"damage": 360, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "RealKnife": new Item(
                "Real Knife",
                "Description: Here we are!",
                {"damage": 440, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "FreshSansEye": new Item(
                "Fresh Sans Eye",
                "Description: Fresh.",
                {"damage": 475, "cooldown": 1.5, "uses": 1, "hits": 1},
                []
            ),
          "NightmareTentacle": new Item(
                "Nightmare Tentacle",
                "Description: ",
                {"damage": 1000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "CrossSansWeapon": new Item(
                "Cross Sans Weapon",
                "Description: ",
                {"damage": 1650, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "NegataleSansBlaster": new Item(
                "Negatale Sans Blaster",
                "Description: ",
                {"damage": 1850, "cooldown": 1.5, "uses": 1, "hits": 1},
                []
            ),
          "InkBrush": new Item(
                "Ink Brush",
                "Description: ",
                {"damage": 2500, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "HopeSword": new Item(
                "Hope Sword",
                "Description: ",
                {"damage": 3600, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "GasterHand": new Item(
                "Gaster Hand",
                "Description: ",
                {"damage": 5000, "cooldown": 1.5, "uses": 1, "hits": 1},
                []
            ),
          "PapyrusBone": new Item(
                "Papyrus Bone",
                "Description: ",
                {"damage": 5250, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "BettyScythe": new Item(
                "Betty Scythe",
                "Description: Fear prowess",
                {"damage": 5500, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "InkSansEye": new Item(
                "Ink Sans Eye",
                "Description: 3 is greater than 1.",
                {"damage": 2500, "cooldown": 1.5, "uses": 1, "hits": 3},
                []
            ),
          "OOF": new Item(
                "OOF",
                "Description: ",
                {"damage": 7000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "FatalErrorBone": new Item(
                "Fatal Error Bone",
                "Description: ",
                {"damage": 8000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "SoulKnife": new Item(
                "Soul Knife",
                "Description: ",
                {"damage": 7500, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "SanesGun": new Item(
                "Sanes Gun",
                "Description: SANESSS!!!!",
                {"damage": 9000, "cooldown": 1.5, "uses": 1, "hits": 1},
                []
            ),
          "SoulTrident": new Item(
                "Soul Trident",
                "Description: ",
                {"damage": 10000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "ScytheXSoul": new Item(
                "Scythe XSoul",
                "Description: Sacred life",
                {"damage": 12000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "OrangeEye": new Item(
                "Orange Eye",
                "Description: Deals x2 DMG on non-moving bosses.",
                {"damage": 15000, "cooldown": 1.5, "uses": 1, "hits": 1},
                []
            ),
          "LegendaryOrb": new Item(
                "Legendary Orb",
                "Description: ",
                {"damage": 21500, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "Temmie": new Item(
                "Temmie",
                "Description: ",
                {"damage": 21000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "TeslaKnife": new Item(
                "Tesla Knife",
                "Description: ",
                {"damage": 34000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "EpicBone": new Item(
                "Epic Bone",
                "Description: ",
                {"damage": 54000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "HardcoreKnife": new Item(
                "Hardcore Knife",
                "Description: ",
                {"damage": 69000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "GameMasterBlock": new Item(
                "Game Master Block",
                "Description: ",
                {"damage": 40000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "XGasterHand": new Item(
                "X Gaster Hand",
                "Description: ",
                {"damage": 50000, "cooldown": 3, "uses": 1, "hits": 1},
                []
            ),
          "SwitchBone": new Item(
                "Switch Bone",
                "Description: ",
                {"damage": 42500, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "BobSword": new Item(
                "Bob Sword.",
                "Description: ",
                {"damage": 50000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "HateKnife": new Item(
                "Hate Knife.",
                "Description: ",
                {"damage": 60000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "Gauntlet": new Item(
                "Gauntlet",
                "Description:",
                {"damage": 80000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "CODEWornDagger": new Item(
                "C.O.D.E Worn Dagger",
                "Description: ",
                {"damage": 85000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "HardcoreGameMasterBlock": new Item(
                "Hardcore Game Master Block",
                "Description: ",
                {"damage": 121000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "OOFBlaster": new Item(
                "OOF Blaster",
                "Description: Deals x3 more DMG if the target has 25% of hp or lower.",
                {"damage": 103330, "cooldown": 1.6, "uses": 1, "hits": 1},
                []
            ),
          "BiggerBlaster": new Item(
                "Bigger Blaster",
                "Description: ",
                {"damage": 150000, "cooldown": 4, "uses": 1, "hits": 1},
                []
            ),
          "CODEBettyScythe": new Item(
                "C.O.D.E Betty Scythe",
                "Description: ",
                {"damage": 155000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "FrogKnife": new Item(
                "Frog Knife",
                "Description: Croak",
                {"damage": 100000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "BraveryGauntlets": new Item(
                "Bravery Gauntlets",
                "Description:  Landing 10 Hits will enable Frenzy Mode: x2 Hit Speed.",
                {"damage": 50000, "cooldown": 0.75, "uses": 1, "hits": 1},
                [
                    {
                        name:"Frenzy Mode",
                        damage:50000,
                        hits:24,
                        uses:1,
                        cooldown:14
                    }
                ],
                {AddSpecial:false}
            ),
          "Chompy": new Item(
                "Chompy",
                "Description: Summons Chompy. Triggers an explosion if you re-activate it while being close to it (deals 25% more Damage).",
                {"damage": 365625, "cooldown": 6, "uses": 2, "hits": 1},
                [
                    {
                        name: "No Explosion",
                        damage: 325000,
                        hits: 1,
                        uses: 1,
                        cooldown: 3
                    }    
                ],
                {hideDamage:true,AddSpecial:false}
            ),
          "ErrorBlaster": new Item(
                "Error Blaster",
                "Description: ",
                {"damage": 80000, "cooldown": 1.5, "uses": 1, "hits": 1},
                []
            ),
          "UPDCODEWornDagger": new Item(
                "UPD C.O.D.E Worn Dagger",
                "Description: ",
                {"damage": 120000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "RealRealKnife": new Item(
                "Real Real Knife",
                "Description: real",
                {"damage": 70000, "cooldown": 0.25, "uses": 1, "hits": 1},
                []
            ),
          "UPDOOFBlaster": new Item(
                "UPD OOF Blaster",
                "Description: Deals x3 more DMG if the target has 25% of hp or lower.",
                {"damage": 138330, "cooldown": 1.6, "uses": 1, "hits": 1},
                []
            ),
          "OOFheadeye": new Item(
                "OOF head eye",
                "Description: A huge head provides a huge power (Deals x3 more DMG if EPICNESS is equipped and on use).",
                {"damage": 90000, "cooldown": 1.4, "uses": 1, "hits": 1},
                []
            ),
          "BerdlysMagic": new Item(
                "Berdly's Magic",
                "Description: Sends swirls with it's axe, and fires deadly projectiles with the spear.",
                {"damage": 150000, "cooldown": 2, "uses": 9, "hits": 1},
                [
                    {
                        name: "Only Special",
                        damage: 50000,
                        hits: 7,
                        uses: 1,
                        cooldown: 20
                    }
                ]
            ),
          "CODESaber": new Item(
                "C.O.D.E Saber",
                "Description: ",
                {"damage": 230000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "FortuneBlade": new Item(
                "Fortune Blade",
                "Description: Each hit increases your Luck 1% for 10 seconds.",
                {"damage": 100000, "cooldown": 0.6, "uses": 1, "hits": 1},
                []
            ),
          "Pizza": new Item(
                "Pizza",
                "Description: Weirdly enough, it doesn't seem to be for human consumption. Extra impact in hit target on Damage from any source.",
                {"damage": 225000, "cooldown": 3, "uses": 4, "hits": 1},
                [
                    {
                        name: "Cheese Blob",
                        damage: 180000,
                        hits: 5,
                        uses: 1,
                        cooldown: 15,
                    }    
                ],
                {hideSpecial:true}
            ),
          "KingsSword": new Item(
                "King's Sword",
                "Description: Attacking while not moving will send x3 Projectiles instead.",
                {"damage": 240000, "cooldown": 0.9, "uses": 1, "hits": 1},
                [
                    {
                        name: "Projectile",
                        damage: 240000,
                        hits: 3,
                        uses: 1,
                        cooldown: 2.6
                    }
                ],
                {AddSpecial:false}
            ),
          "KingPower": new Item(
                "King Power",
                "Description: King's prowess.",
                {"damage": 100000, "cooldown": 1.5, "uses": 1, "hits": 1},
                []
            ),
          "KillerKnife": new Item(
                "Killer Knife",
                "Description: Perfect for it's job...",
                {"damage": 115000, "cooldown": 1, "uses": 1, "hits": 1},
                [
                    {
                        name: "Laser",
                        damage: 115000,
                        hits: 1,
                        uses: 0,
                        cooldown: 1
                    }
                ]
            ),
          "LegionHammer": new Item(
                "Legion Hammer",
                "Description: Summon a Hammer Zone (10 seconds CD)",
                {"damage": 150000, "cooldown": 1, "uses": 13, "hits": 1},
                [
                    {
                        name: "Special",
                        damage: 150000,
                        hits: 15,
                        uses: 1,
                        cooldown: 14
                    }
                ]
            ),
          "DevilsKnife": new Item(
                "Devils Knife",
                "Description: ",
                {"damage": 300000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "PuppetScarf": new Item(
                "Puppet Scarf",
                "Description: Each consecutive hit reduces Cooldown by 0.1 seconds. Stacks up to 6 times, grants 100000 bonus Damage when fully stacked. Missing or waiting 3 seconds resets the stacks.   (stats based on boost)",
                {"damage": 300000, "cooldown": 0.6, "uses": 1, "hits": 1},
                []
            ),
          "Rose": new Item(
                "Rose",
                "Description: Creates a Zone that damages Enemies inside of it.",
                {"damage": 225000, "cooldown": 1, "uses": 15, "hits": 1},
                [
                    {
                        name: "Special",
                        damage: 225000,
                        hits: 5,
                        uses: 1,
                        cooldown: 15
                    }    
                ],
                {hideSpecial:false}
            ),
          "EndoHead": new Item(
                "Endo Head",
                "Description: Gives speed boost and Invincibility on hit, picking up the head will shorten it's Cooldown.\n(based on 5 second cooldown due to cooldown decrease when picking it up)",
                {"damage": 525000, "cooldown": 5, "uses": 1, "hits": 3},
                [],
                {addHits:false}
            ),
          "MultiverseScythe": new Item(
                "Multiverse Scythe",
                "Description: Ink turned into a scythe :flushed:",
                {"damage": 345000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "EpicEye": new Item(
                "Epic Eye",
                "Description: what's 10+10?",
                {"damage": 45000, "cooldown": 12, "uses": 1, "hits": 20},
                []
            ),
          "AllBreaking": new Item(
                "All Breaking",
                "Description: Damage ignores 50% + 2 of Enemy's Defense and tags them. Hitting tagged enemies will deal bonus DMG.",
                {"damage": 3000000, "cooldown": 4.4, "uses": 6, "hits": 1.5},
                [],
                {hideDamage:true,addHits:false}
            ),
          "Cutter": new Item(
                "Cutter",
                "Description: Knife recharges every 1.5 seconds up to 6 times.",
                {"damage": 375000, "cooldown": 10.75, "uses": 7, "hits": 2},
                []
            ),
          "SnansBlade": new Item(
                "SnansBlade",
                "Description: ",
                {"damage": 355000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "UPDCODEBettyScythe": new Item(
                "UPD C.O.D.E Betty Scythe",
                "Description: ",
                {"damage": 355000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "BraveryGauntletsUpgraded": new Item(
                "Bravery Gauntlets (Upgraded)",
                "Description:  Landing 12 Hits will enable Frenzy Mode: x2 Hit Speed.",
                {"damage": 83000, "cooldown": 0.75, "uses": 1, "hits": 1},
                [
                    {
                        name:"Frenzy Mode",
                        damage:83000,
                        hits:40,
                        uses:1,
                        cooldown:17+(5/6),
                    }
                ],
                {AddSpecial:false}
            ),
          "SnatSansMinion": new Item(
                "SnatSansMinion",
                "Description: Snatcher's Gift: A Special Minion that was planned to be used in the fight against you. attaches to an enemy and spins against it, damaging 8 times. Doesn't let the enemy use shields during the spin. You're probably lucky he spared you from it.       (all 8 hits)",
                {"damage": 235000, "cooldown": 10, "uses": 1, "hits": 8},
                []
            ),
          "Pyrokinesis": new Item(
                "Pyrokinesis",
                "Description: Sends a Fireball that on hit, deals tick Damage 3 times(Being near the enemy instantly sets them on fire). The third use will launch a Fire Fist instead (x3 Damage total)",
                {"damage": 250000, "cooldown": 18, "uses": 2, "hits": 3},
                [
                    {
                        name: "3x damage",
                        damage: 750000,
                        hits: 3,
                        uses: 1,
                        cooldown: 18
                    }
                ],
                {hideSpecial:true}
            ),
          "DeityBlock": new Item(
                "Deity Block",
                "Description: ",
                {"damage": 435000, "cooldown": 1, "uses": 1, "hits": 0.9},
                []
            ),
          "EraserSaber": new Item(
                "EraserSaber",
                "Description: ",
                {"damage": 465000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "StringMaster": new Item(
                "String Master",
                "Description: Sends a string with each attack, landing them in an enemy will Damage them a little and restore 0.5% of your Max HP",
                {"damage": 600000, "cooldown": 1.2, "uses": 1, "hits": 1},
                [
                    {
                        name: "String",
                        damage: 25000,
                        hits: 2,
                        uses: 0,
                        cooldown: 1.2
                    }
                ]
            ),
          "LONGSTICK": new Item(
                "LONGSTICK",
                "Description: ",
                {"damage": 350000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "KONGPOWER": new Item(
                "KONGPOWER",
                "Description: KING OF CHAOS SPECIAL ATTACK!!!",
                {"damage": 425000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "JOVILSCYTHE": new Item(
                "JOVILSCYTHE",
                "Description: ",
                {"damage": 750000, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "TheVoid": new Item(
                "The Void",
                "Description: ",
                {"damage": 766666, "cooldown": 1, "uses": 19, "hits": 1},
                [
                    {
                        name: "Void",
                        damage:766666,
                        cooldown:19,
                        uses:1,
                        hits:5,
                    }
                ]
            ),
          "SansBoneSword": new Item(
                "SansBoneSword",
                "Description: LV increases the Damage by 20 (Max 6000 LV)",
                {"damage": 60, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "ErrorSansBoneSword": new Item(
                "ErrorSansBoneSword",
                "Description: LV increases the Damage by 25 (Max 6000 LV)",
                {"damage": 160, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "SoulBlaster": new Item(
                "SoulBlaster",
                "Description: LV increases the Damage by 42 (Max 6000 LV)",
                {"damage": 2000, "cooldown": 1.2, "uses": 1, "hits": 1},
                []
            ),
          "Doombringer": new Item(
                "Doombringer",
                "Description: Brings despair equal in power to it's user.",
                {"damage": 200000, "cooldown": 1.1, "uses": 12, "hits": 1},
                [
                    {
                        name: "Melee Special",
                        damage: 240000,
                        hits: 3,
                        uses: 1,
                        cooldown: 14.3
                    },
                    {
                        name: "Ranged",
                        damage: 660000/18,
                        hits: 18,
                        uses: 13,
                        cooldown: 14.3
                    }
                ],
            ),
          "Snowball": new Item(
                "Snowball",
                "Description: ",
                {"damage": 11000, "cooldown": 1.7, "uses": 1, "hits": 1},
                []
            ),
          "Toy": new Item(
                "Toy",
                "Description: ",
                {"damage": 7000, "cooldown": 0.8, "uses": 1, "hits": 1},
                []
            ),
          "AscentdentsStars": new Item(
                "Ascentdents Stars",
                "Description: ",
                {"damage": 25000, "cooldown": 3, "uses": 1, "hits": 4},
                []
            ),
          "ChristmasTree": new Item(
                "Christmas Tree",
                "Description: ",
                {"damage": 85000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "ChristmasSword": new Item(
                "Christmas Sword",
                "Description: ",
                {"damage": 270000, "cooldown": 0.9, "uses": 1, "hits": 1},
                []
            ),
          "AncientPumpblade": new Item(
                "Ancient Pumpblade",
                "Description: A blade that grows in strength with it's user. It was forged by the ancient blacksmiths of the Pump Kingdom.",
                {"damage": 15000, "cooldown": 2.7, "uses": 3, "hits": 1},
                [
                    {
                        name: "With Earth Slam",
                        damage: 15000,
                        hits: 4,
                        uses: 0,
                        cooldown: 3.6
                    },
                    {
                        name: "With Pump Bomb",
                        damage: 15000,
                        hits: 4,
                        uses: 0,
                        cooldown: 3.6
                    },
                    {
                        name: "With Pumpment Cut",
                        damage: 15000,
                        hits: 11,
                        uses: 0,
                        cooldown: 3.6
                    }
                ],
                {AddSpecial:false}
            ),
          "DarkPumpblade": new Item(
                "Dark Pumpblade",
                "Description: An exact copy of the Ancient Pumpblade.",
                {"damage": 15000, "cooldown": 2.7, "uses": 3, "hits": 1},
                [
                    {
                        name: "With Earth Slam",
                        damage: 15000,
                        hits: 4,
                        uses: 0,
                        cooldown: 3.6
                    },
                    {
                        name: "With Pump Bomb",
                        damage: 15000,
                        hits: 4,
                        uses: 0,
                        cooldown: 3.6
                    },
                    {
                        name: "With Pumpment Cut",
                        damage: 15000,
                        hits: 12,
                        uses: 0,
                        cooldown: 3.6
                    }
                ],
                {AddSpecial:false}
            ),
          "SteelFrost": new Item(
                "Steel Frost",
                "Description: Very Frosty. 30 extra Damage per LV(30K max) and 7500 extra Damage per Reset(300K Max). Throws a projectile that deals the same Damage as the Melee attack.",
                {"damage": 3000, "cooldown": 1, "uses": 1, "hits": 1},
                [
                    {
                        name: "Ranged",
                        damage: 3000,
                        hits: 1,
                        uses: 0,
                        cooldown: 1
                    },
                ]
            ),
          "ChillingBlade": new Item(
                "Chilling Blade",
                "Description: Very Chill, so Chill, it gives 100 extra Damage per LV(100K Max) and 15000 extra Damage oer Reset(600K Max)",
                {"damage": 3000, "cooldown": 2, "uses": 1, "hits": 1},
                [
                    {
                        name: "Melee",
                        damage: 3000,
                        hits: 1,
                        uses: 0,
                        cooldown: 2
                    },
                ]
            ),
          "RiftEssence": new Item(
                "Rift Essence",
                "Description: Getting the right patterns will trigger events. When Resetting, your extra TP is turned into LV's.",
                {"damage": 225000, "cooldown": 15, "uses": 1, "hits": 3},
                [
                    {
                        name:"Slashes",
                        "damage": 225000, 
                        "cooldown": 15, 
                        "uses": 1, 
                        "hits": 3
                    },
                    {
                        name:"Explosion",
                        "damage": 500000, 
                        "cooldown": 15, 
                        "uses": 1, 
                        "hits": 1
                    },
                    {
                        name:"Wires",
                        "damage": 90000, 
                        "cooldown": 15, 
                        "uses": 1, 
                        "hits": 6
                    }
                ],
                {AddSpecial:false,showBase:false}
            ),
          "CounterBone": new Item(
                "Counter Bone",
                "Description: For 1.5 seconds, you will ignore the damage received and create a blast that deals 500k DMG up to 3 times.",
                {"damage": 500000, "cooldown": 10, "uses": 1, "hits": 3},
                []
            ),
          "Kill": new Item(
                "Kill",
                "Description: Teleports behind nearest boss dealing 1M DMG and giving Invincibility during 3 seconds, doesn't give invincibility if you're out of range",
                {"damage": 1000000, "cooldown": 20, "uses": 1, "hits": 1},
                []
            ),
          "SnatKnife": new Item(
                "Snat Knife",
                "Description: IT'S NOT A RE_SKIL TRUST.",
                {"damage": 1000000, "cooldown": 20, "uses": 1, "hits": 1},
                []
            ),
          "Bike": new Item(
                "Bike",
                "Description: +10 Speed boost while it's equipped and extra 15 Speed boost when activated, it can hit multiple times and stun enemeies.",
                {"damage": 43750, "cooldown": 5, "uses": 1, "hits": 10},
                []
            ),
          "CounterBoneupgraded": new Item(
                "Counter Bone (upgraded)",
                "Description: For 1.5 seconds, you will ignore the damage received and create a blast that deals 500k DMG up to 3 times.",
                {"damage": 750000, "cooldown": 10, "uses": 1, "hits": 4},
                []
            ),
          "Maskv1": new Item(
                "Mask (v1)",
                "Description: Hauriunt omnia",
                {"damage": 1400000, "cooldown": 30, "uses": 1, "hits": 1},
                []
            ),
          "Maskv2": new Item(
                "Mask (v2)",
                "Description: Hauriunt omnia",
                {"damage": 7105000/9, "cooldown": 36, "uses": 4, "hits": 9/4},
                [],
                {hideDamage:true}
            ),
          "Banana": new Item(
                "Banana",
                "Description: You place a spinning banana, after 4 seconds it explodes healing 40% of missing HP to nearby allies and dealing damage to nearby enemies",
                {"damage": 1000000, "cooldown": 30, "uses": 1, "hits": 1},
                []
            ),
          "CoolSkull": new Item(
                "Cool Skull",
                "You summon your Cool Friend, chomping Enemies on his path, increasing your Luck by 10%, and Attack by 2000 while it's active(Hitting at least one Enemy will increase the duration from 5 to 6.5)",
                {"damage": 300000, "cooldown": 42, "uses": 1, "hits": 6},
                []
            ),
          "PocketCore": new Item(
                "Pocket Core",
                "Place a CORE Sentry, Damaging one target at a time with increasing Damage. True Reset will greatly increase Damage after 50 seconds. Taking damage will also wear down the Sewntry and getting out of it's range will destroy it as well.",
                {"damage": 18200000/119, "cooldown": 61, "uses": 1, "hits": 119},
                [],
                {hideDamage:true}
            ),
          "HackingPhone": new Item(
                "Hacking Phone",
                "Description: You gain Immunity for 3 seconds and slowly elevate, damaging Enemies in range.",
                {"damage": 366666, "cooldown": 20, "uses": 1, "hits": 6},
                []
            ),
          "SanssHat": new Item(
                "Sans's Hat",
                "Description: The hat starts gathering a storm, which later explosion causes all nearby enemies to Freeze.",
                {"damage": 75000, "cooldown": 25, "uses": 1, "hits": 10},
                []
            ),
          "HeadThrow": new Item(
                "Head Throw",
                "Description: You throw your head away as a bomb which periodically increases size for 1 second and making it roll in the floor, taking 10% of your current HP. The base damage will depend on the HP that is taken away x3.",
                {"damage": 18, "cooldown": 10, "uses": 1, "hits": 1},
                []
            ),
          "FlamingStallion": new Item(
                "Flaming Stallion",
                "Description: +11 Speed boost and Jump Power while it's equipped and extra 75 Speed boost and Jump Power when activated, it can hit multiple times and stun enemies.",
                {"damage": 100000, "cooldown": 5, "uses": 1, "hits": 12},
                []
            ),
          "FOOLSCONTENT": new Item(
                "FOOL'S CONTENT",
                "Description: Gain 100 WalkSpeed and after 5 seconds, you explod dealing Damage to nearby enemies and get back to your original position with your HP prior activation(If the position is too far away, you won't get tped back unless out of combat)",
                {"damage": 1000000, "cooldown": 30, "uses": 1, "hits": 1},
                []
            ),
          "SantasBag": new Item(
                "Santa's Bag",
                "Description: Sends a Gift that Damages enemies for 1 LV = 120 Damage (1.2M Max) dashing backwards and giving you Immunity for a second. If it hits a Player, they will be attached to the gift until it opens, healing them for 10% of your Max HP(Receiver gets 20% of their Max HP at most) and also gain 1 second Immunity.",
                {"damage": 120, "cooldown": 5, "uses": 1, "hits": 1},
                []
            ),
          "WintersCurse": new Item(
                "Winter's Curse",
                "Description: Cold.. so cold.. no one can survive, not even the light... Every 10 seconds, a hand will grip the nearest enemy.",
                {"damage": 400300, "cooldown": 10, "uses": 1, "hits": 1},
                []
            ),
          "GrilledCheeseSandwich": new Item(
                "Grilled Cheese Sandwich",
                "Description: {grilled sandwich link} from {grilled sandwich trello link}",
                {"damage": jokeDMG, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "DEEZBONESWORD": new Item(
                "DEEZ BONE SWORD",
                "Description: {deez link} from {deez trello link}",
                {"damage": jokeDMG, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
          "LancelotsGun": new Item(
                "Lancelot's Gun",
                "Description: {lancelot link} from {lancelot trello link}",
                {"damage": jokeDMG, "cooldown": 1, "uses": 1, "hits": 1},
                []
            ),
        }
        
        //settings
        var precision = 3;
        function changeSettings() {
            var precisionVal = document.getElementById("Precision");
            var precisionTxt = document.getElementById("PrecisionText");
            precisionTxt.value = "Precision: Max";
            precision = precisionVal.value;
            precisionTxt.innerHTML = "Precision: " + precision;
            if (precision == 10) {
                precisionTxt.innerHTML = "Precision: Max";
            }
            UpdateStuff();
        }
        
        function convert(n) {
            if (n === -2.5e238 || precision === 10) return n;
            
            const g = Math.round(n * 100) / 100;
            const intDigits = x =>
            (x === 0 ? 1 : Math.floor(Math.log10(Math.abs(Math.trunc(x)))) + 1);
            
            if (precision >= intDigits(n)) return g;
            
            const abs = Math.abs(g);
            if (abs < 1000) return g;
            
            const suffixes = ["", "k", "m", "b", "t","q","Q"];
            const idx = Math.min(Math.floor(Math.log10(abs) / 3), suffixes.length - 1);
            const scaled = abs / Math.pow(1000, idx);
            
            const p = Math.max(1, Math.min(9, precision | 0));
            const sig = Number(scaled.toPrecision(p));
            
            return (g < 0 ? "-" : "") + sig + suffixes[idx];
        }
        
        var expandedOpen = false;
        var openBox;
        window.onload = function() {
            document.onclick = function(e){
                if (e.target.id == "dark background" && openBox.style.visibility == "visible") {
                    openBox.style.visibility = "hidden";
                    expandedOpen = false;
                    darken.style.visibility = "hidden";
                }
            }
        }
        
        var darken = document.createElement("div");
        darken.style.position = "fixed";
        darken.style.top = "0vh"; darken.style.left = "0vw";
        darken.style.zIndex = 998; darken.style.backgroundColor = "#000000";
        darken.style.width = "100vw"; darken.style.height = "100vh";
        darken.style.visibility = "hidden";
        darken.style.opacity = 0.5; darken.setAttribute("id","dark background");
        
        for (const [key, item] of Object.entries(ITEMS)) {
            var a = document.createElement("div");
            a.className = "DPSBox";
            a.style.position = "relative";
            a.style.margin = "2%";
            a.setAttribute("id", item.name);
            a.style.float = "left";
            
            // Add Sound
            a.addEventListener('mouseenter', () => {
                new Audio("./Sounds/Hover.mp3").play();
            });
            
            var img = document.createElement("img");
            img.src = "Images/" + item.name.replace(/\s/g, '') + ".png";
            a.appendChild(img);
            img.style.width = "80%";
            img.style.margin = "0 auto";
            
            //expanded view
            var e = document.createElement("div");
            e.className = "EDPSBox";
            e.style.position = "fixed";
            e.style.float = "left";
            e.style.visibility = "hidden";
            e.style.zIndex = 999;
            e.style.top = "15vh";
            e.setAttribute("id", "Expanded " + item.name);
            
            var eTopBar = document.createElement("div");
            eTopBar.className = "ETitle";
            eTopBar.style.float = "left";
            e.appendChild(eTopBar);
            
            var eimg = document.createElement("img");
            eimg.src = "Images/" + item.name.replace(/\s/g, '') + ".png";
            eimg.style.width = "15%";
            eimg.style.position = "relative";
            eimg.style.marginRight = "1%"
            eimg.style.float = "left";
            eTopBar.appendChild(eimg);
            
            ETitle = document.createElement("p"); ETitle.style.position = "relative";
            ETitle.style.textAlign = "left";
            ETitle.style.margin = "0 0 0 0";
            ETitle.innerText = item.name; ETitle.style.fontSize = "3vw";
            
            EDesc = document.createElement("p"); EDesc.style.position = "relative";
            EDesc.style.textAlign = "left"; EDesc.style.margin = "0 0 0 0";
            EDesc.innerText = item.description; EDesc.style.fontSize = "1.4vw";
            
            TimesUsed = document.createElement("p"); TimesUsed.style.position = "relative";
            TimesUsed.style.width = "14%";
            TimesUsed.innerText = (item.stats.uses == 1) ? "Used 1 time": ("Used " + item.stats.uses + " Times"); 
            TimesUsed.style.fontSize = "1.4vw"; TimesUsed.style.margin = "0 0 0 0";
            
            DamageDiv = document.createElement("div"); DamageDiv.style.float = "left";
            DamageDiv.className = "EDivs";
            
            DPSDiv = document.createElement("div");
            DPSDiv.className = "EDivs"; DPSDiv.style.float = "left";
            function addText(txt, Push, ID) {
                Text = document.createElement("p"); Text.style.position = "relative";
                Text.style.textAlign = "left";
                Text.innerText = txt; Text.style.fontSize = "2vw";
                if (ID != undefined) {
                    Text.setAttribute("id", ID)
                }
                Push.appendChild(Text);
            }
            if (item.original.base.damage != undefined && item.options.showBase) {
                if (!item.options.hideDamage) {
                    addText("Base Damage: " + convert(item.original.base.damage), DamageDiv);
                }
                addText("Hit Damage: " + item.stats.totalHits, DamageDiv);
                addText("Total Damage: " + convert(item.stats.totalDamage), DamageDiv);
                addText("Base DPS: " + convert(item.stats.DPS), DPSDiv, item.name);
                addText("Hit DPS: " + convert(item.stats.hitDPS), DPSDiv);
            }
            if (!item.options.hideSpecial) {
                for (var special of item.original.specials) {
                    addText(special.name + " Total Damage: " + convert(special.damage*special.hits), DamageDiv);
                    addText(special.name + " Hit Damage: " + special.hits, DamageDiv);
                    addText(special.name + " DPS: " + convert(special.damage*special.hits/special.cooldown), DPSDiv);
                    addText(special.name + " Hit DPS: " + convert(special.hits/special.cooldown), DPSDiv);
                }
            }
            //divider
            div = document.createElement("div"); div.style.float = "left";
            div.style.margin = "2vw";
            div.style.width = "94%"; div.style.border = "solid white";
            
            //Your Stats
            DamageDiv2 = document.createElement("div"); DamageDiv2.style.float = "left";
            DamageDiv2.className = "EDivs";
            
            DPSDiv2 = document.createElement("div");
            DPSDiv2.className = "EDivs"; DPSDiv2.style.float = "left";
            if (item.original.base.damage != undefined) {
                if (!item.options.hideDamage) {
                    addText("Your Damage: " + convert(item.original.base.damage), DamageDiv2, item.name + " Damage");
                }
                addText("Total Damage: " + convert(item.stats.totalDamage), DamageDiv2, item.name + " Total Damage");
                addText("Your DPS: " + convert(item.stats.DPS), DPSDiv2, item.name + " DPS");
            }
            if (!item.options.hideSpecial) {
                for (var special of item.original.specials) {
                    addText(special.name + " Total Damage: " + convert(special.damage*special.hits), DamageDiv2, item.name + " " + special.name + " Damage");
                    addText(special.name + " DPS: " + convert(special.damage*special.hits/special.cooldown), DPSDiv2, item.name + " " + special.name + " DPS");
                }
            }
            
            //elements
            eTopBar.appendChild(ETitle);
            eTopBar.appendChild(EDesc);
            eTopBar.appendChild(TimesUsed);
            e.appendChild(DamageDiv);
            e.appendChild(DPSDiv);
            e.appendChild(div);
            e.appendChild(DamageDiv2);
            e.appendChild(DPSDiv2);
            
            if (item.name == "Grilled Cheese Sandwich") {
                EDesc.innerHTML = "Description: ";

                var a1 = document.createElement("a");
                a1.href = "https://www.youtube.com/watch?v=NfuGKPCPDnw";
                a1.innerHTML = "Grilled Cheese";
                EDesc.appendChild(a1);
                var inbetween = document.createTextNode(" from ");
                EDesc.appendChild(inbetween);
                var a2 = document.createElement("a");
                a2.href = "https://trello.com/c/IOFAclUa/217-deez-eternal-ordeal";
                a2.innerHTML = "Grilled Cheese Trello";
                EDesc.appendChild(a2);
            }
            if (item.name == "DEEZ BONE SWORD") {
                EDesc.innerHTML = "Description: ";

                var a1 = document.createElement("a");
                a1.href = "https://www.youtube.com/watch?v=51_1zQg2k6s";
                a1.innerHTML = "DEEZ BONE SWORD";
                EDesc.appendChild(a1);
                var inbetween = document.createTextNode(" from ");
                EDesc.appendChild(inbetween);
                var a2 = document.createElement("a");
                a2.href = "https://trello.com/c/IOFAclUa/217-deez-eternal-ordeal";
                a2.innerHTML = "DEEZ BONE SWORD Trello";
                EDesc.appendChild(a2);
            }
            if (item.name == "Lancelot's Gun") {
                EDesc.innerHTML = "Description: ";

                var a1 = document.createElement("a");
                a1.href = "https://www.youtube.com/watch?v=51_1zQg2k6s";
                a1.innerHTML = "Lancelot Gun";
                EDesc.appendChild(a1);
                var inbetween = document.createTextNode(" from ");
                EDesc.appendChild(inbetween);
                var a2 = document.createElement("a");
                a2.href = "https://trello.com/c/JogGuFf5/199-lance-unwavering-soul";
                a2.innerHTML = "Lancelot Gun Trello";
                EDesc.appendChild(a2);
            }
            
            document.getElementById("HTML").appendChild(darken);
            a.onclick = function() {
                if (!expandedOpen) {
                    document.getElementById("Expanded " + this.id).style.visibility = "visible";
                    openBox = document.getElementById("Expanded " + this.id); expandedOpen = true;
                    darken.style.visibility = "visible";
                    new Audio("./Sounds/Select.mp3").play();
                    
                    var box = document.getElementById("Expanded " + this.id);
                    
                    const boxWidth = box.offsetWidth;
                    const boxHeight = box.offsetHeight;
                    const scaleX = (window.innerWidth * 0.8) / boxWidth;
                    const scaleY = (window.innerHeight * 0.8) / boxHeight;
                    const scale = Math.min(scaleX, scaleY, 1);
                    box.style.transformOrigin = "top center";
                    box.style.transform = `scale(${scale})`;
                    box.style.top = "5%";
                }
            }
            var Base = document.createElement("p");
            if (item.original.base.damage != undefined) {
                Base.innerText = "Base DPS: " + convert(item.stats.DPS);
            } else {
                Base.innerText = "Base DPS: 111.11B";
            }
            Base.style.textAlign = "center";
            Base.className = "DPSText";
            a.appendChild(Base);
            
            var YourDmg = document.createElement("p");
            YourDmg.setAttribute('id', item.name + " MiniDPS");
            if (item.original.base.damage != undefined) {
                YourDmg.innerText = "Your DPS: " + convert(item.stats.DPS);
            } else {
                YourDmg.innerText = "Your DPS: 111.11B";
            }
            YourDmg.style.textAlign = "center";
            YourDmg.className = "DPSText";
            a.appendChild(YourDmg);
            
            WeaponDPS.appendChild(a);
            WeaponDPS.appendChild(e);
        }
    </script>
    <script src="Number_Fixing.js"></script>
    <script>
        //search feature
        function filterDPS() {
            const search = document.getElementById("Search").value.toLowerCase();
            const boxes = document.querySelectorAll(".DPSBox");
        
            boxes.forEach(box => {
                const img = box.querySelector("img");
                const secondText = box.querySelectorAll("p")[1]; // 2nd <p> element
        
                // Extract image name from src
                let imgName = "";
                if (img && img.src) {
                    const srcParts = img.src.split("/");
                    imgName = srcParts[srcParts.length - 1].replace(".png", "").toLowerCase();
                }
        
                // Get ID from second <p>
                let idName = secondText?.id?.toLowerCase() || "";
        
                // Check if either matches the search
                const matches = imgName.includes(search) || idName.includes(search);
        
                box.style.display = matches ? "block" : "none";
            });
        }
    </script>
    <div class="Box" id="SkillDPS" style="margin: 3% 0; overflow:auto; width:58%; float:left"></div>
    <div class="Box" id="SkillStats" style="margin: 3% 0; overflow:auto; width:33%; float:left; position:sticky; top:10%"></div>
    <script>
        function UpdateSliders() {
            if (DmgSlider.value >= 7) {
                DmgSlider.value = 11;
                Dmg.innerText = "Damage: 11";
            } else {
                Dmg.innerText = "Damage: " + DmgSlider.value;
            }
            Reload.innerText = "Reload: " + ReloadSlider.value;
        }
        
        var s = document.getElementById("SkillStats");
        var title = document.createElement("p"); title.style.position = "relative";
        title.style.top = "-20%"; title.style.left = "0%"; title.style.textAlign = "left";
        title.innerText = "Skill Stats:"; title.style.fontSize = "4vw";
        title.style.marginTop = "1%"; title.style.marginBottom = "2%";
        
        var divDmg = document.createElement("div"); divDmg.style.width = "40%"; divDmg.style.marginBottom = "3%";
        var divReload = document.createElement("div"); divReload.style.width = "40%";
        
        var Dmg = document.createElement("p"); Dmg.style.position = "relative"; 
        Dmg.style.top = "-2%"; Dmg.style.textAlign = "left"; Dmg.style.width = "100%";
        Dmg.innerText = "Damage: 1"; Dmg.style.fontSize = "2vw"; Dmg.style.marginLeft = "2%";
        divDmg.appendChild(Dmg);
        
        var DmgSlider = document.createElement('input'); DmgSlider.style.marginBottom = "2%";
        DmgSlider.id = "DmgSlider"; DmgSlider.type = 'range'; DmgSlider.className = "slider"
        DmgSlider.min = 1; DmgSlider.max = 7; DmgSlider.value = 1; DmgSlider.style.position = "relative";
        DmgSlider.style.top = "0%"; DmgSlider.style.left = "-7.5%";
        DmgSlider.onChange = onchange = function() { UpdateSliders(); UpdateSkills(); };
        divDmg.appendChild(DmgSlider); 
        
        var Reload = document.createElement("p"); Reload.style.position = "relative";
        Reload.style.top = "-2%"; Reload.style.textAlign = "left"; Reload.style.width = "100%";
        Reload.innerText = "Reload: 1"; Reload.style.fontSize = "2vw"; Reload.style.marginLeft = "2%";
        divReload.appendChild(Reload);
        
        var ReloadSlider = document.createElement('input'); ReloadSlider.style.marginBottom = "2%";
        ReloadSlider.id = "ReloadSlider"; ReloadSlider.type = 'range'; ReloadSlider.className = "slider"
        ReloadSlider.min = 1; ReloadSlider.max = 6; ReloadSlider.value = 1;
        ReloadSlider.style.position = "relative"; ReloadSlider.style.left = "-7.5%";
        ReloadSlider.onChange = onchange = function() { UpdateSliders(); UpdateSkills(); };
        divReload.appendChild(ReloadSlider);
        
        divDmg.overflow = "hidden";
        divDmg.style.float = "left";
        divReload.overflow = "hidden";
        divReload.style.float = "left";
        
        s.appendChild(title);
        s.appendChild(divDmg);
        s.appendChild(divReload);
        
    </script>
    <script>
        var SkillDPS = document.getElementById("SkillDPS");
        SkillDPS.style.overflow = "hidden";

        var Skills = {
            Froggit: new Item(
                "Froggit",
                "Description: Jumps and creates a shockwave on landing.",
                {
                    damage: 450000,
                    cooldown:25,
                    hits:1,
                    uses:1
                }
            ),
            Flowey: new Item(
                "Flowey",
                "Description: Creates vines around you that leech off enemies, damaging them and healing a portion of your HP.",
                {
                    damage: 45000,
                    cooldown:40,
                    hits:6,
                    uses:1
                }
            ),
            Papyrus: new Item(
                "Papyrus",
                "Description: Reduces the Speed of enemies in range, dealing DMG.",
                {
                    damage: 125000,
                    cooldown:35,
                    hits:5,
                    uses:1
                }
            ),
            Undyne: new Item(
                "Undyne",
                "Description: Propels you in the air, then teleports to any Enemy in range dealing DMG. When you reach 0 HP, you will enter Undying mode boosting your Skill DMG x2 and getting all your HP back while slowly getting your HP drained.",
                {
                    damage: 670000,
                    cooldown:35,
                    hits:1,
                    uses:1
                }
            ),
            Mettaton: new Item(
                "Mettaton",
                "Description: Boosts Speed and gives Invincibility for 2 seconds, creating 8 shockwaves for 2 second.",
                {
                    damage: 100000,
                    cooldown:35,
                    hits:8,
                    uses:1
                }
            ),
            Asgore: new Item(
                "Asgore",
                "Description: Creates a blast after a slight charge-up. The blast increases its size every 0.05 seconds 9 times, boosting the blast and burning DMG by 10% every time its size increases. Passive: burning DMG increases if the target is not moving, and it lowers if the target is fast. (This is with the 90% dmg increase from shooting asgore far away)",
                {
                    damage: 500000,
                    cooldown:35,
                    hits:1,
                    uses:1
                },
                [
                    {
                        name:"Burn",
                        damage:100000,
                        hits:5,
                        uses:0,
                        cooldown:35
                    }
                ],
                {hideSpecial:true}
            ),
            Noelle: new Item(
                "Noelle",
                "Description: Targets nearest Enemy.",
                {
                    damage: 400000,
                    cooldown:20,
                    hits:1,
                    uses:1
                }
            ),
            SNoelle: new Item(
                "SNoelle",
                "Description: Targets nearest Enemy.",
                {
                    damage: 210000,
                    cooldown:40,
                    hits:10,
                    uses:1
                }
            ),
            Sans: new Item(
                "Sans",
                "Description: Teleports above enemy in range and creates a Gaster Blaster dealing DMG.",
                {
                    damage: 1500000,
                    cooldown:45,
                    hits:1,
                    uses:1
                }
            ),
            Chara: new Item(
                "Chara",
                "Description: Deals DMG multiple times after one second, stunning the Enemy.",
                {
                    damage: 150000,
                    cooldown:35,
                    hits:7,
                    uses:1
                }
            ),
            Betty: new Item(
                "Betty",
                "Description: Deals 300000 DMG plus 5% of the current Enemy's Health and gives Invincibility for 5 seconds (If it lands). If a nearby Enemy is executable the CD is refreshed and killing a boss will give you 25% extra XP.",
                {
                    damage: 300000,
                    cooldown:35,
                    hits:1,
                    uses:1
                }
            ),
            Gaster: new Item(
                "Gaster",
                "Description: ",
                {
                    damage: 100000,
                    cooldown:30,
                    hits:10,
                    uses:1
                },
                [
                    {
                        name:"Explosion",
                        damage:200000,
                        cooldown:30,
                        hits:1,
                        uses:0,
                    }
                ],
                {hideSpecial:true}
            ),
            FallenOne: new Item(
                "Fallen One",
                "Description: You rise above all and make the sky fall.",
                {
                    damage: 510000,
                    cooldown:42,
                    hits:15,
                    uses:1
                }
            ),
            MagicBlast: new Item(
                "Magic Blast",
                "Description: Launches a high damaging blast.",
                {
                    damage: 500000,
                    cooldown:35,
                    hits:1,
                    uses:1
                }
            ),
            MagicRush: new Item(
                "Magic Rush",
                "Description: Launches 5 magic projectiles.",
                {
                    damage: 100000,
                    cooldown:35,
                    hits:5,
                    uses:1
                }
            ),
            RocketFist: new Item(
                "Rocket Fist",
                "Description: Launches a fist at high speeds that can collide with anything.",
                {
                    damage: 625000,
                    cooldown:35,
                    hits:1,
                    uses:1
                }
            ),
        }
        for (const [key, item] of Object.entries(Skills)) {
            var b = document.createElement("div"); b.setAttribute("id",item.name);
            b.style.width = "100%"; b.style.margin = "3% auto 3% 3%"
            b.style.height = "auto"; b.style.position = "relative"; b.style.left = "-15%";
            
            b.addEventListener('mouseenter', () => {
                new Audio("Sounds/Hover.mp3").play();
            });
            
            var img = document.createElement("img");
            img.src = "Images/" + item.name.replace(/\s/g, '') + ".png";
            b.appendChild(img);
            img.style.width = "15%";
            img.style.left = "-20%"; img.style.position = "relative";
            img.style.margin = "0 auto";
            
            //expanded view
            var eS = document.createElement("div");
            eS.className = "EDPSBox";
            eS.style.position = "fixed";
            eS.style.float = "left";
            eS.style.visibility = "hidden";
            eS.style.zIndex = 999;
            eS.style.top = "15vh";
            eS.setAttribute("id", "Expanded " + item.name);
            
            var eSTopBar = document.createElement("div");
            eSTopBar.className = "ETitle";
            eSTopBar.style.float = "left";
            eS.appendChild(eSTopBar);
            
            var eSimg = document.createElement("img");
            eSimg.src = "Images/" + item.name.replace(/\s/g, '') + ".png";
            eSimg.style.width = "15%";
            eSimg.style.position = "relative";
            eSimg.style.marginRight = "1%"
            eSimg.style.float = "left";
            eSTopBar.appendChild(eSimg);
            
            ESTitle = document.createElement("p"); ESTitle.style.position = "relative";
            ESTitle.style.textAlign = "left";
            ESTitle.style.margin = "0 0 0 0";
            ESTitle.innerText = item.name; ESTitle.style.fontSize = "3vw";
            
            ESDesc = document.createElement("p"); ESDesc.style.position = "relative";
            ESDesc.style.textAlign = "left"; ESDesc.style.margin = "0 0 0 0";
            ESDesc.innerText = item.description; ESDesc.style.fontSize = "1.4vw";
            
            STimesUsed = document.createElement("p"); STimesUsed.style.position = "relative";
            STimesUsed.style.width = "14%";
            STimesUsed.innerText = (item.stats.uses == 1) ? "Used 1 time": ("Used " + item.stats.uses + " Times"); 
            STimesUsed.style.fontSize = "1.4vw"; STimesUsed.style.margin = "0 0 0 0";
            
            //DAMAGE
            DamageDiv = document.createElement("div"); DamageDiv.style.float = "left";
            DamageDiv.className = "EDivs";
            
            DPSDiv = document.createElement("div");
            DPSDiv.className = "EDivs"; DPSDiv.style.float = "left";

            var subtract = 1;
            var multiplier = 1.1;
            if (item.name == "Fallen One") {
                subtract = 0;
                multiplier = 1;
            }

            function addText(txt, Push, ID) {
                Text = document.createElement("p"); Text.style.position = "relative";
                Text.style.textAlign = "left";
                Text.innerText = txt; Text.style.fontSize = "2vw";
                if (ID != undefined) {
                    Text.setAttribute("id", ID);
                }
                Push.appendChild(Text);
            }
            if (item.original.base.damage != undefined) {
                if (!item.options.hideDamage) {
                    addText("Base Damage: " + convert(item.original.base.damage*multiplier), DamageDiv);
                }
                var totaldmg = item.original.base.damage*multiplier*item.original.base.hits;
                
                addText("Hit Damage: " + item.stats.totalHits, DamageDiv);
                addText("Total Damage: " + convert(totaldmg), DamageDiv);
                addText("Base DPS: " + convert(totaldmg/(item.original.base.cooldown-subtract)), DPSDiv, item.name);
                addText("Hit DPS: " + convert(item.stats.hitDPS), DPSDiv);
            }
            if (!item.options.hideSpecial) {
                for (var special of item.original.specials) {
                    addText(special.name + " Total Damage: " + convert(special.damage*special.hits), DamageDiv);
                    addText(special.name + " Hit Damage: " + special.hits, DamageDiv);
                    addText(special.name + " DPS: " + convert(special.damage*special.hits/special.cooldown), DPSDiv);
                    addText(special.name + " Hit DPS: " + convert(special.hits/special.cooldown), DPSDiv);
                }
            }
            
            //divider
            div = document.createElement("div"); div.style.float = "left";
            div.style.margin = "2vw";
            div.style.width = "94%"; div.style.border = "solid white";
            
            //Your Stats
            var special = item.original.specials[0];
            var totaldmg = (item.original.base.damage)*multiplier*item.original.base.hits + (special ? (item.stats.specials[special.name].damage * multiplier * item.stats.specials[special.name].hits) : 0);
            DamageDiv2 = document.createElement("div"); DamageDiv2.style.float = "left";
            DamageDiv2.className = "EDivs";

            DPSDiv2 = document.createElement("div");
            DPSDiv2.className = "EDivs"; DPSDiv2.style.float = "left";
            if (item.original.base.damage != undefined) {
                if (!item.options.hideDamage) {
                    addText("Your Damage: " + convert(item.original.base.damage*multiplier), DamageDiv2, item.name + " Damage");
                }
                addText("Total Damage: " + convert(totaldmg), DamageDiv2, item.name + " Total Damage");
                addText("Your DPS: " + convert(totaldmg/(item.original.base.cooldown-subtract)), DPSDiv2, item.name + " EDPS");
            }
            if (!item.options.hideSpecial) {
                for (var special of item.original.specials) {
                    addText(special.name + " Total Damage: " + convert(special.damage*special.hits), DamageDiv2, item.name + " " + special.name + " Damage");
                    addText(special.name + " DPS: " + convert((special.damage*special.hits)/(special.cooldown)), DPSDiv2, item.name + " " + special.name + " DPS");
                }
            }
            
            //elements
            eSTopBar.appendChild(ESTitle);
            eSTopBar.appendChild(ESDesc);
            eSTopBar.appendChild(STimesUsed);
            eS.appendChild(DamageDiv);
            eS.appendChild(DPSDiv);
            eS.appendChild(div);
            eS.appendChild(DamageDiv2);
            eS.appendChild(DPSDiv2);
            
            b.onclick = function() {
                if (!expandedOpen) {
                    document.getElementById("Expanded " + this.id).style.visibility = "visible";
                    openBox = document.getElementById("Expanded " + this.id); expandedOpen = true;
                    darken.style.visibility = "visible";
                    new Audio("Sounds/Select.mp3").play();
                    
                    var box = document.getElementById("Expanded " + this.id);
                    
                    const boxWidth = box.offsetWidth;
                    const boxHeight = box.offsetHeight;
                    const scaleX = (window.innerWidth * 0.8) / boxWidth;
                    const scaleY = (window.innerHeight * 0.8) / boxHeight;
                    const scale = Math.min(scaleX, scaleY, 1);
                    box.style.transformOrigin = "top center";
                    box.style.transform = `scale(${scale})`;
                    box.style.top = "5%";
                }
            }
            
            var bDPS = document.createElement("p"); bDPS.style.position = "absolute";
            bDPS.style.top = "-5%"; bDPS.style.left = "45%"; bDPS.style.textAlign = "left";
            bDPS.innerText = "Base DPS: " + convert(totaldmg/(item.original.base.cooldown-subtract)); bDPS.style.fontSize = "2vw";
            b.appendChild(bDPS);
            
            var yDPS = document.createElement("p"); yDPS.style.position = "absolute"; yDPS.setAttribute('id', item.name + " DPS");
            yDPS.style.top = "25%"; yDPS.style.left = "45%"; yDPS.style.textAlign = "left";
            yDPS.innerText = "Base DPS: " + convert(totaldmg/(item.original.base.cooldown-subtract)); yDPS.style.fontSize = "2vw"; yDPS.style.width = "70%";
            b.appendChild(yDPS);
            
            SkillDPS.appendChild(b);
            SkillDPS.appendChild(eS);
        }
    </script>
</html>
